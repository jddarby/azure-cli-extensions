interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 17:58:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "9985939870973944498"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2478'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389496",
        "name": "AOSM_CLI_deployment_1711389496", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "79b1ee51-dea0-4320-a3a3-2fca92279656", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4028'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:58:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "9985939870973944498"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2478'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389496",
        "name": "AOSM_CLI_deployment_1711389496", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-03-25T17:58:18.5145767Z", "duration": "PT0.000929S", "correlationId":
        "feb28d73-502d-4dd0-b6a1-f650f59b5f2d", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkfunctiondefinitiongroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389496/operationStatuses/08584902173871851384?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '3181'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:58:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:58:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:58:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:59:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 17:59:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:00:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:00:48 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:01:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:01:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902173871851384?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389496",
        "name": "AOSM_CLI_deployment_1711389496", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "9985939870973944498", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-03-25T18:02:05.8785154Z", "duration": "PT3M47.3648677S",
        "correlationId": "feb28d73-502d-4dd0-b6a1-f650f59b5f2d", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkfunctiondefinitiongroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4044'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '343'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '349'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "2261224723127030745"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2296'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389742",
        "name": "AOSM_CLI_deployment_1711389742", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "4849ae23-56fa-48d8-a6d6-5d6ace7bd563", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1667'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "2261224723127030745"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2296'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389742",
        "name": "AOSM_CLI_deployment_1711389742", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-03-25T18:02:24.9409663Z", "duration": "PT0.0001289S",
        "correlationId": "5ebd7827-48be-480b-80e3-98bb95b04963", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389742/operationStatuses/08584902171407842747?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1138'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902171407842747?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902171407842747?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:02:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902171407842747?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902171407842747?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389742",
        "name": "AOSM_CLI_deployment_1711389742", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "2261224723127030745", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-03-25T18:03:47.7867371Z", "duration": "PT1M22.8458997S",
        "correlationId": "5ebd7827-48be-480b-80e3-98bb95b04963", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1683'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-vm-acr-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",
        "repositories": ["automated-cli-tests-artifact"], "expiry": "2024-03-26T18:03:57.0975036+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '353'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02636.2686
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - eabbba33-fddf-4a84-918b-46965931d544
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/eabbba33-fddf-4a84-918b-46965931d544?_nouploadcache=false&_state=O6vuESeLpFaFPEq1XNa0F1QSr0EBvFYdeXyKMpSSK0J7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImVhYmJiYTMzLWZkZGYtNGE4NC05MThiLTQ2OTY1OTMxZDU0NCIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wMy0yNVQxODowMzo1Ny42NzM2NjA1NDdaIn0%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"metadata\": {\n    \"_generator\": {\n
      \     \"name\": \"bicep\",\n      \"version\": \"0.8.9.13224\",\n      \"templateHash\":
      \"14979664264804385741\"\n    }\n  },\n  \"parameters\": {\n    \"location\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"[resourceGroup().location]\"\n
      \   },\n    \"subnetName\": {\n      \"type\": \"string\"\n    },\n    \"ubuntuVmName\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"ubuntu-vm\"\n    },\n
      \   \"virtualNetworkId\": {\n      \"type\": \"string\"\n    },\n    \"sshPublicKeyAdmin\":
      {\n      \"type\": \"string\"\n    },\n    \"imageName\": {\n      \"type\":
      \"string\"\n    }\n  },\n  \"variables\": {\n    \"imageResourceGroup\": \"[resourceGroup().name]\",\n
      \   \"subscriptionId\": \"[subscription().subscriptionId]\",\n    \"vmSizeSku\":
      \"Standard_D2s_v3\"\n  },\n  \"resources\": [\n    {\n      \"type\": \"Microsoft.Network/networkInterfaces\",\n
      \     \"apiVersion\": \"2021-05-01\",\n      \"name\": \"[format('{0}_nic',
      parameters('ubuntuVmName'))]\",\n      \"location\": \"[parameters('location')]\",\n
      \     \"properties\": {\n        \"ipConfigurations\": [\n          {\n            \"name\":
      \"ipconfig1\",\n            \"properties\": {\n              \"subnet\": {\n
      \               \"id\": \"[format('{0}/subnets/{1}', parameters('virtualNetworkId'),
      parameters('subnetName'))]\"\n              },\n              \"primary\": true,\n
      \             \"privateIPAddressVersion\": \"IPv4\"\n            }\n          }\n
      \       ]\n      }\n    },\n    {\n      \"type\": \"Microsoft.Compute/virtualMachines\",\n
      \     \"apiVersion\": \"2021-07-01\",\n      \"name\": \"[parameters('ubuntuVmName')]\",\n
      \     \"location\": \"[parameters('location')]\",\n      \"properties\": {\n
      \       \"hardwareProfile\": {\n          \"vmSize\": \"[variables('vmSizeSku')]\"\n
      \       },\n        \"storageProfile\": {\n          \"imageReference\": {\n
      \           \"id\": \"[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}',
      variables('subscriptionId'), variables('imageResourceGroup')), 'Microsoft.Compute/images',
      parameters('imageName'))]\"\n          },\n          \"osDisk\": {\n            \"osType\":
      \"Linux\",\n            \"name\": \"[format('{0}_disk', parameters('ubuntuVmName'))]\",\n
      \           \"createOption\": \"FromImage\",\n            \"caching\": \"ReadWrite\",\n
      \           \"writeAcceleratorEnabled\": false,\n            \"managedDisk\":
      \"[json('{\\\"storageAccountType\\\": \\\"Premium_LRS\\\"}')]\",\n            \"deleteOption\":
      \"Delete\",\n            \"diskSizeGB\": 30\n          }\n        },\n        \"osProfile\":
      {\n          \"computerName\": \"[parameters('ubuntuVmName')]\",\n          \"adminUsername\":
      \"azureuser\",\n          \"linuxConfiguration\": {\n            \"disablePasswordAuthentication\":
      true,\n            \"ssh\": {\n              \"publicKeys\": [\n                {\n
      \                 \"path\": \"/home/azureuser/.ssh/authorized_keys\",\n                  \"keyData\":
      \"[parameters('sshPublicKeyAdmin')]\"\n                }\n              ]\n
      \           },\n            \"provisionVMAgent\": true,\n            \"patchSettings\":
      {\n              \"patchMode\": \"ImageDefault\",\n              \"assessmentMode\":
      \"ImageDefault\"\n            }\n          },\n          \"secrets\": [],\n
      \         \"allowExtensionOperations\": true\n        },\n        \"networkProfile\":
      {\n          \"networkInterfaces\": [\n            {\n              \"id\":
      \"[resourceId('Microsoft.Network/networkInterfaces', format('{0}_nic', parameters('ubuntuVmName')))]\"\n
      \           }\n          ]\n        }\n      },\n      \"dependsOn\": [\n        \"[resourceId('Microsoft.Network/networkInterfaces',
      format('{0}_nic', parameters('ubuntuVmName')))]\"\n      ]\n    }\n  ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3591'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/eabbba33-fddf-4a84-918b-46965931d544?_nouploadcache=false&_state=O6vuESeLpFaFPEq1XNa0F1QSr0EBvFYdeXyKMpSSK0J7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImVhYmJiYTMzLWZkZGYtNGE4NC05MThiLTQ2OTY1OTMxZDU0NCIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wMy0yNVQxODowMzo1Ny42NzM2NjA1NDdaIn0%3D&digest=sha256%3Ae71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      docker-content-digest:
      - sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:57 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - b4482758-4aaf-4f3c-a970-d789bfb48289
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/b4482758-4aaf-4f3c-a970-d789bfb48289?_nouploadcache=false&_state=v6AthxLFRsBMcY0fy0QgWMs_YHzTDMD9MVjoCTPTHEB7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImI0NDgyNzU4LTRhYWYtNGYzYy1hOTcwLWQ3ODliZmI0ODI4OSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wMy0yNVQxODowMzo1Ny45MTc0MTYwMDVaIn0%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/b4482758-4aaf-4f3c-a970-d789bfb48289?_nouploadcache=false&_state=v6AthxLFRsBMcY0fy0QgWMs_YHzTDMD9MVjoCTPTHEB7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImI0NDgyNzU4LTRhYWYtNGYzYy1hOTcwLWQ3ODliZmI0ODI4OSIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wMy0yNVQxODowMzo1Ny45MTc0MTYwMDVaIn0%3D&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      docker-content-digest:
      - sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/manifests/sha256:8923fa544da97914212bc9173ec512741d331940e4a2c7b6fbad979657a5c507
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"storageAccountId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-21026C9C/providers/Microsoft.Storage/storageAccounts/21026c9cubuntublobstore7",
        "containerCredentials": [{"containerName": "automatedclitestsvhd-1-0-0", "containerSasUri":
        "https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx"}],
        "expiry": "2024-03-26T18:03:59.590023+00:00", "credentialType": "AzureStorageAccountToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '532'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02636.2686
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-blob-content-length:
      - '512'
      x-ms-blob-type:
      - PageBlob
      x-ms-date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      etag:
      - '"0x8DC4CF5F2674878"'
      last-modified:
      - Mon, 25 Mar 2024 18:03:59 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: "61 38 6b 92 16 4b cc ac 6f d4 02 5c 6f 62 79 b9 \n8e 62 ae 07 02 1c dc
      73 5b 7a 51 e7 56 4e 4a b0 \n54 4a 93 2e 6b dd 3c b5 8b 60 fa 80 b1 80 1b 89
      \n1e 4d 7d 86 8e 25 76 58 24 8d 21 87 83 06 88 d6 \na4 fd 94 9c 66 b6 db ee
      92 46 f0 25 fc 84 bb f5 \n3f d9 49 28 ea 54 6a 2a 33 fa e0 47 eb 22 af 91 \nd4
      34 a6 d9 fe 58 cb 54 03 35 d6 45 40 96 4e f3 \n31 ea 78 20 45 e9 f2 3a de cb
      38 53 c0 9c b2 b7 \n12 9e 57 d9 f6 1b cb 20 23 8c 86 d3 40 da 84 c3 \n22 5b
      48 61 63 e2 5f 5f 43 6d 8f 41 fc ce c1 87 \n33 e1 e2 61 63 e2 5f 5"
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '512'
      Content-Type:
      - application/octet-stream
      If-Match:
      - '"0x8DC4CF5F2674878"'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
      x-ms-date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      x-ms-page-write:
      - update
      x-ms-range:
      - bytes=0-511
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?comp=page&sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:03:58 GMT
      etag:
      - '"0x8DC4CF5F2703F16"'
      last-modified:
      - Mon, 25 Mar 2024 18:03:59 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-sequence-number:
      - '0'
      x-ms-content-crc64:
      - iWvWqElPrJg=
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "7199002541811128072"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3768'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389842",
        "name": "AOSM_CLI_deployment_1711389842", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "e32ce8e1-60e0-48e8-94c1-f25489f3ae4a",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1412'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:04:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "7199002541811128072"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3768'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389842",
        "name": "AOSM_CLI_deployment_1711389842", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-03-25T18:04:04.6661296Z", "duration": "PT0.0007516S", "correlationId":
        "82e8fe90-333a-4789-b2b6-8ef5c428752e", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389842/operationStatuses/08584902170410054229?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1137'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:04:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902170410054229?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:04:03 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902170410054229?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:04:34 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902170410054229?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:04 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902170410054229?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389842",
        "name": "AOSM_CLI_deployment_1711389842", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "7199002541811128072", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-03-25T18:05:27.011234Z", "duration": "PT1M22.345856S", "correlationId":
        "82e8fe90-333a-4789-b2b6-8ef5c428752e", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1426'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd build
      Connection:
      - keep-alive
      ParameterSetName:
      - -f
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkfunctiondefinitiongroups/ubuntu-vm/networkfunctiondefinitionversions/1.0.0",
        "name": "1.0.0", "type": "microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-03-25T18:04:06.2905984Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "User", "lastModifiedAt":
        "2024-03-25T18:04:06.2905984Z"}, "properties": {"networkFunctionTemplate":
        {"networkFunctionApplications": [{"artifactProfile": {"vhdArtifactProfile":
        {"vhdName": "automated-cli-tests-vhd", "vhdVersion": "1-0-0"}, "artifactStore":
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"}},
        "deployParametersMappingRuleProfile": {"vhdImageMappingRuleProfile": {"userConfiguration":
        "{\"imageHyperVGeneration\":\"V1\",\"imageName\":\"ubuntu-vmImage\"}"}, "applicationEnablement":
        "Enabled"}, "artifactType": "VhdImageFile", "dependsOnProfile": null, "name":
        "automated-cli-tests-vhd"}, {"artifactProfile": {"templateArtifactProfile":
        {"templateName": "automated-cli-tests-artifact", "templateVersion": "1.0.0"},
        "artifactStore": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"}},
        "deployParametersMappingRuleProfile": {"templateMappingRuleProfile": {"templateParameters":
        "{\"imageName\":\"ubuntu-vmImage\",\"subnetName\":\"{deployParameters.automated-cli-tests-artifact.subnetName}\",\"virtualNetworkId\":\"{deployParameters.automated-cli-tests-artifact.virtualNetworkId}\",\"sshPublicKeyAdmin\":\"{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}\"}"},
        "applicationEnablement": "Enabled"}, "artifactType": "ArmTemplate", "dependsOnProfile":
        null, "name": "automated-cli-tests-artifact"}], "nfviType": "AzureCore"},
        "versionState": "Preview", "description": null, "deployParameters": "{\"$schema\":\"https://json-schema.org/draft-07/schema#\",\"title\":\"DeployParametersSchema\",\"type\":\"object\",\"properties\":{\"automated-cli-tests-artifact\":{\"type\":\"object\",\"properties\":{\"subnetName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"sshPublicKeyAdmin\":{\"type\":\"string\"}},\"required\":[\"subnetName\",\"virtualNetworkId\",\"sshPublicKeyAdmin\"]}},\"required\":[\"automated-cli-tests-artifact\"]}",
        "networkFunctionType": "VirtualNetworkFunction", "provisioningState": "Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:37 GMT
      etag:
      - '"2409a12a-0000-1000-0000-6601bca20000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:05:36 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 204
      message: No Content
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "3408402259472792388"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string"}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1769'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389940",
        "name": "AOSM_CLI_deployment_1711389940", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "3408402259472792388", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "54a85b08-bae5-427e-83c2-be6cb37950f1", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3033'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "3408402259472792388"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string"}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1769'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389940",
        "name": "AOSM_CLI_deployment_1711389940", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "3408402259472792388", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-03-25T18:05:42.2535988Z", "duration": "PT0.000304S", "correlationId":
        "f3fca21f-5ce2-46d1-8d5f-162c513fc4a9", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389940/operationStatuses/08584902169434398181?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2411'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:05:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:06:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:06:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:07:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:07:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:08:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:08:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:12 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902169434398181?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711389940",
        "name": "AOSM_CLI_deployment_1711389940", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "3408402259472792388", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-03-25T18:09:27.0063067Z", "duration": "PT3M44.7530119S",
        "correlationId": "f3fca21f-5ce2-46d1-8d5f-162c513fc4a9", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkservicedesigngroups", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3049'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '340'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1992933778514196637"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1406'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390186",
        "name": "AOSM_CLI_deployment_1711390186", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "8afa6cf9-cd7d-43e3-82ba-e94443f151e4", "providers": [{"namespace": "Microsoft.Hybridnetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1247'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "1992933778514196637"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.Hybridnetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1406'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390186",
        "name": "AOSM_CLI_deployment_1711390186", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-03-25T18:09:48.1324604Z", "duration": "PT0.0001545S",
        "correlationId": "592bb1e1-ac9f-497b-9bfa-0cdf696c5ef0", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390186/operationStatuses/08584902166975568339?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '984'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1198'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902166975568339?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:09:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902166975568339?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:10:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902166975568339?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:10:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902166975568339?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390186",
        "name": "AOSM_CLI_deployment_1711390186", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "1992933778514196637", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-03-25T18:11:07.7210118Z", "duration": "PT1M19.5887059S",
        "correlationId": "592bb1e1-ac9f-497b-9bfa-0cdf696c5ef0", "providers": [{"namespace":
        "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1263'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-hybridnetwork/unknown Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-nsd-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",
        "repositories": ["ubuntu"], "expiry": "2024-03-26T18:11:23.3413681+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02636.2686
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:23 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:23 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:11:23 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - fd5bb3eb-4a3d-4d23-b155-ecaa4e0114e3
      location:
      - /v2/ubuntu/blobs/uploads/fd5bb3eb-4a3d-4d23-b155-ecaa4e0114e3?_nouploadcache=false&_state=3G6ifdobkzDhdzi9mhm01eIGwXZnkAA9ZiVmnos_qO97Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZmQ1YmIzZWItNGEzZC00ZDIzLWIxNTUtZWNhYTRlMDExNGUzIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTAzLTI1VDE4OjExOjIzLjgyNDAzNDMxMloifQ%3D%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "17061501665466778051"}}, "parameters": {"configObject":
      {"type": "secureObject"}}, "variables": {"resourceGroupId": "[resourceGroup().id]",
      "identityObject": "[if(equals(parameters(''configObject'').managedIdentityId,
      ''''), createObject(''type'', ''SystemAssigned''), createObject(''type'', ''UserAssigned'',
      ''userAssignedIdentities'', createObject(format(''{0}'', parameters(''configObject'').managedIdentityId),
      createObject())))]", "nfdvSymbolicName": "[format(''{0}/{1}/{2}'', parameters(''configObject'').publisherName,
      parameters(''configObject'').nfdgName, parameters(''configObject'').nfdvName)]"},
      "resources": [{"copy": {"name": "nfResource", "count": "[length(parameters(''configObject'').deploymentParameters)]"},
      "type": "Microsoft.HybridNetwork/networkFunctions", "apiVersion": "2023-09-01",
      "name": "[format(''{0}{1}'', parameters(''configObject'').nfdgName, copyIndex())]",
      "location": "[parameters(''configObject'').location]", "identity": "[variables(''identityObject'')]",
      "properties": {"networkFunctionDefinitionVersionResourceReference": {"id": "[extensionResourceId(format(''/subscriptions/{0}/resourceGroups/{1}'',
      subscription().subscriptionId, parameters(''configObject'').publisherResourceGroup),
      ''Microsoft.Hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions'',
      split(variables(''nfdvSymbolicName''), ''/'')[0], split(variables(''nfdvSymbolicName''),
      ''/'')[1], split(variables(''nfdvSymbolicName''), ''/'')[2])]", "idType": "Open"},
      "nfviType": "AzureCore", "nfviId": "[if(equals(parameters(''configObject'').customLocationId,
      ''''), variables(''resourceGroupId''), parameters(''configObject'').customLocationId)]",
      "allowSoftwareUpdate": true, "configurationType": "Secret", "secretDeploymentValues":
      "[string(parameters(''configObject'').deploymentParameters[copyIndex()])]"}}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '1999'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/fd5bb3eb-4a3d-4d23-b155-ecaa4e0114e3?_nouploadcache=false&_state=3G6ifdobkzDhdzi9mhm01eIGwXZnkAA9ZiVmnos_qO97Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiZmQ1YmIzZWItNGEzZC00ZDIzLWIxNTUtZWNhYTRlMDExNGUzIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTAzLTI1VDE4OjExOjIzLjgyNDAzNDMxMloifQ%3D%3D&digest=sha256%3A12313ff8d0eaac58c21979e02f5c7a0494cf1e428e0fa05292a25d58ca55ce48
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-content-digest:
      - sha256:12313ff8d0eaac58c21979e02f5c7a0494cf1e428e0fa05292a25d58ca55ce48
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:12313ff8d0eaac58c21979e02f5c7a0494cf1e428e0fa05292a25d58ca55ce48
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 4dee4aa3-a110-4996-b96b-8223c183c9ec
      location:
      - /v2/ubuntu/blobs/uploads/4dee4aa3-a110-4996-b96b-8223c183c9ec?_nouploadcache=false&_state=oF1uLSGh8JfzoMDg7-TKVRGZOEI2ZF1IdR6DvjBfHpJ7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiNGRlZTRhYTMtYTExMC00OTk2LWI5NmItODIyM2MxODNjOWVjIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTAzLTI1VDE4OjExOjI0LjEwMTUzODEwN1oifQ%3D%3D
      range:
      - 0-0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/blobs/uploads/4dee4aa3-a110-4996-b96b-8223c183c9ec?_nouploadcache=false&_state=oF1uLSGh8JfzoMDg7-TKVRGZOEI2ZF1IdR6DvjBfHpJ7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiNGRlZTRhYTMtYTExMC00OTk2LWI5NmItODIyM2MxODNjOWVjIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTAzLTI1VDE4OjExOjI0LjEwMTUzODEwN1oifQ%3D%3D&digest=sha256%3Ae3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-content-digest:
      - sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1999,
      "digest": "sha256:12313ff8d0eaac58c21979e02f5c7a0494cf1e428e0fa05292a25d58ca55ce48",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.283333'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 0,
      "digest": "sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1999,
      "digest": "sha256:12313ff8d0eaac58c21979e02f5c7a0494cf1e428e0fa05292a25d58ca55ce48",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.26.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac8695e00d2b.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Mon, 25 Mar 2024 18:11:24 GMT
      docker-content-digest:
      - sha256:65ed9564bb5395a1759e4c82a4887a9bcbe6781559e28d776b147e6783a7e342
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/manifests/sha256:65ed9564bb5395a1759e4c82a4887a9bcbe6781559e28d776b147e6783a7e342
      server:
      - openresty
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "17633006497835624407"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdvName": {"type": "string"}, "deploymentParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdvName", "deploymentParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdvName": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdvName}",
      "deploymentParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deploymentParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4162'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390287",
        "name": "AOSM_CLI_deployment_1711390287", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "17633006497835624407", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration":
        "PT0S", "correlationId": "80140928-7603-4ac8-a0aa-8c08c07601c0", "providers":
        [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2505'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.8.9.13224", "templateHash": "17633006497835624407"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdvName": {"type": "string"}, "deploymentParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdvName", "deploymentParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdvName": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdvName}",
      "deploymentParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deploymentParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[parameters(''nfviSiteName'')]", "type": "AzureCore"}},
      "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.Hybridnetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4162'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390287",
        "name": "AOSM_CLI_deployment_1711390287", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "17633006497835624407", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Accepted", "timestamp": "2024-03-25T18:11:29.4102358Z",
        "duration": "PT0.0008498S", "correlationId": "a602f935-0405-4dda-b5b2-2c80a599d7c5",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390287/operationStatuses/08584902165963162984?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2015'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1197'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902165963162984?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902165963162984?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:11:59 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584902165963162984?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:12:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.56.0 azsdk-python-azure-mgmt-resource/23.1.0b2 Python/3.8.10 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.29)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1711390287",
        "name": "AOSM_CLI_deployment_1711390287", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "17633006497835624407", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "2024-03-25T18:12:05.5262343Z",
        "duration": "PT36.1168483S", "correlationId": "a602f935-0405-4dda-b5b2-2c80a599d7c5",
        "providers": [{"namespace": "Microsoft.Hybridnetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkservicedesigngroups/networkservicedesignversions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.Hybridnetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0",
        "resourceType": "Microsoft.Hybridnetwork/publishers/networkservicedesigngroups/networkservicedesignversions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Hybridnetwork/publishers/automated-cli-tests-ubuntu-publisher/networkservicedesigngroups/ubuntu/networkservicedesignversions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2519'
      content-type:
      - application/json; charset=utf-8
      date:
      - Mon, 25 Mar 2024 18:12:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 200
      message: OK
version: 1
