interactions:
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:49:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 4B5E348348004CDE9BEB937A1317C40D Ref B: CO1EDGE2819 Ref C: 2024-05-08T16:49:09Z'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:49:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 39A74100BF414A16B03218BFFCED015A Ref B: CO1EDGE1408 Ref C: 2024-05-08T16:49:09Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "4595863518953475042"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2480'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715186952",
        "name": "AOSM_CLI_deployment_1715186952", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4595863518953475042", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "9966d8af-aead-42c5-ba12-d3fba8bf0e23", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkFunctionDefinitionGroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4028'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:49:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 642FC22B1D734D249235A69C10C14434 Ref B: CO1EDGE2509 Ref C: 2024-05-08T16:49:12Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "4595863518953475042"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "saArtifactStoreName":
      {"type": "string", "metadata": {"description": "Name of a Storage Account-backed
      Artifact Store, deployed under the publisher."}}, "nfDefinitionGroup": {"type":
      "string", "metadata": {"description": "Name of a Network Function Definition
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureStorageAccount"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nfDefinitionGroup": {"value": "ubuntu-vm"}, "saArtifactStoreName": {"value":
      "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2480'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715186952",
        "name": "AOSM_CLI_deployment_1715186952", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4595863518953475042", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-05-08T16:49:21.1221491Z", "duration": "PT0.0002281S", "correlationId":
        "05cdeb5d-8b15-4256-860c-267853553bd5", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkFunctionDefinitionGroups", "locations": ["uksouth"]}]}],
        "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715186952/operationStatuses/08584864199264024254?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '3182'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:49:21 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: CE531A1ECE9C4A818C4C67F048A7CCA9 Ref B: CO1EDGE2510 Ref C: 2024-05-08T16:49:16Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:49:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 19876F0BB67A4207904884D73048D467 Ref B: CO1EDGE1917 Ref C: 2024-05-08T16:49:22Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:49:53 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 3E6AC430BE66436E99D8A147CBD6857E Ref B: CO1EDGE1614 Ref C: 2024-05-08T16:49:53Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:50:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 245FAB918527445698EFB7CEA0DB4A9F Ref B: SJC211051204019 Ref C: 2024-05-08T16:50:24Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:50:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 1847A61AA5C640229CF0D5C6A528670C Ref B: SJC211051205023 Ref C: 2024-05-08T16:50:55Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:51:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: EFBECA96FC1042E08A9E9D2C42FB64A7 Ref B: CO1EDGE2521 Ref C: 2024-05-08T16:51:26Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:51:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: E4928B65C5774A958B88AEC14F10BD5D Ref B: CO1EDGE1211 Ref C: 2024-05-08T16:51:57Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:52:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 40163658E35A4A67A0D3FA2252EC0F64 Ref B: SJC211051204033 Ref C: 2024-05-08T16:52:27Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:52:58 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: F058333168BB46E9BE75843671FBB4D9 Ref B: SJC211051204007 Ref C: 2024-05-08T16:52:59Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864199264024254?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 299C0A70DFD6471D8A4E57FDE95CDD45 Ref B: SJC211051205051 Ref C: 2024-05-08T16:53:29Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715186952",
        "name": "AOSM_CLI_deployment_1715186952", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4595863518953475042", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-05-08T16:53:21.6911683Z", "duration": "PT4M0.5692473S",
        "correlationId": "05cdeb5d-8b15-4256-860c-267853553bd5", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkFunctionDefinitionGroups",
        "locations": ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-blob-store"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu-vm"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '4043'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C072E6195E194FA9A88F704CFBCD44EB Ref B: SJC211051205023 Ref C: 2024-05-08T16:53:30Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '343'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 0D8DD5C9792843D1BF9D8EC1C762A7F9 Ref B: SJC211051204035 Ref C: 2024-05-08T16:53:32Z'
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '349'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:32 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 7F662963DEFF4AC6989617A4FA575878 Ref B: SJC211051205017 Ref C: 2024-05-08T16:53:32Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14347213902282880649"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2299'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187215",
        "name": "AOSM_CLI_deployment_1715187215", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14347213902282880649", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "dd1eab92-b7ea-49ef-9400-591b016c9d11", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1668'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:38 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 6E28DCC4656648AFA353670F3A9FEBE0 Ref B: SJC211051205051 Ref C: 2024-05-08T16:53:36Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14347213902282880649"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the manifest to deploy for the ACR-backed Artifact Store"}}, "saManifestName":
      {"type": "string", "metadata": {"description": "Name of the manifest to deploy
      for the Storage Account-backed Artifact Store"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-artifact", "artifactType": "ArmTemplate", "artifactVersion":
      "1.0.0"}]}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''saArtifactStoreName''), parameters(''saManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "automated-cli-tests-vhd", "artifactType": "VhdImageFile", "artifactVersion":
      "1-0-0"}]}}]}, "parameters": {"location": {"value": "uksouth"}, "publisherName":
      {"value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value":
      "ubuntu-acr"}, "acrManifestName": {"value": "ubuntu-vm-acr-manifest-1-0-0"},
      "saArtifactStoreName": {"value": "ubuntu-blob-store"}, "saManifestName": {"value":
      "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '2299'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187215",
        "name": "AOSM_CLI_deployment_1715187215", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14347213902282880649", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-05-08T16:53:43.0767218Z", "duration": "PT0.0004228S",
        "correlationId": "5e583cee-dcd2-4079-80a9-a902ea19adac", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187215/operationStatuses/08584864196644279693?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1139'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:43 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: CAF6894674134E7F880F347D66387030 Ref B: SJC211051205051 Ref C: 2024-05-08T16:53:38Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864196644279693?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:53:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 8E6A4E9FF3374D4EAB83E85C0766C156 Ref B: SJC211051205033 Ref C: 2024-05-08T16:53:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864196644279693?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:54:15 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 49A3CE518B6F401085188A3BA5477D5F Ref B: SJC211051205011 Ref C: 2024-05-08T16:54:15Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864196644279693?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:54:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 02B93484D16245B4A1DD0EA86B8B26A4 Ref B: SJC211051204033 Ref C: 2024-05-08T16:54:45Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864196644279693?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:16 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 5B2529C4AD51485B80EB3F09FD479E17 Ref B: SJC211051205017 Ref C: 2024-05-08T16:55:16Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187215",
        "name": "AOSM_CLI_deployment_1715187215", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14347213902282880649", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-vm-acr-manifest-1-0-0"}, "saManifestName": {"type": "String",
        "value": "ubuntu-vm-sa-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-05-08T16:55:12.8971624Z", "duration": "PT1M29.8208634S",
        "correlationId": "5e583cee-dcd2-4079-80a9-a902ea19adac", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1684'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:17 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 295C3214068144F59D98BDBF4D203B18 Ref B: SJC211051204049 Ref C: 2024-05-08T16:55:17Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-vm-acr-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-vm-acr-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",
        "repositories": ["automated-cli-tests-artifact"], "expiry": "2024-05-09T16:55:24.4087904+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '353'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:24 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 3F2FA16F834048B9A63E4C1127DF2B54 Ref B: SJC211051205039 Ref C: 2024-05-08T16:55:18Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:25 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:26 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:31 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - e04986f0-753f-42c6-9305-931d271e7eab
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/e04986f0-753f-42c6-9305-931d271e7eab?_nouploadcache=false&_state=hKwMde8CcS4gk2i9a1Uoo44KIaOAWJ7OB62CTR4PWUh7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImUwNDk4NmYwLTc1M2YtNDJjNi05MzA1LTkzMWQyNzFlN2VhYiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0wOFQxNjo1NTozMS43Nzc1MTMyODVaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: "{\n  \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n
      \ \"contentVersion\": \"1.0.0.0\",\n  \"metadata\": {\n    \"_generator\": {\n
      \     \"name\": \"bicep\",\n      \"version\": \"0.8.9.13224\",\n      \"templateHash\":
      \"14979664264804385741\"\n    }\n  },\n  \"parameters\": {\n    \"location\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"[resourceGroup().location]\"\n
      \   },\n    \"subnetName\": {\n      \"type\": \"string\"\n    },\n    \"ubuntuVmName\":
      {\n      \"type\": \"string\",\n      \"defaultValue\": \"ubuntu-vm\"\n    },\n
      \   \"virtualNetworkId\": {\n      \"type\": \"string\"\n    },\n    \"sshPublicKeyAdmin\":
      {\n      \"type\": \"string\"\n    },\n    \"imageName\": {\n      \"type\":
      \"string\"\n    }\n  },\n  \"variables\": {\n    \"imageResourceGroup\": \"[resourceGroup().name]\",\n
      \   \"subscriptionId\": \"[subscription().subscriptionId]\",\n    \"vmSizeSku\":
      \"Standard_D2s_v3\"\n  },\n  \"resources\": [\n    {\n      \"type\": \"Microsoft.Network/networkInterfaces\",\n
      \     \"apiVersion\": \"2021-05-01\",\n      \"name\": \"[format('{0}_nic',
      parameters('ubuntuVmName'))]\",\n      \"location\": \"[parameters('location')]\",\n
      \     \"properties\": {\n        \"ipConfigurations\": [\n          {\n            \"name\":
      \"ipconfig1\",\n            \"properties\": {\n              \"subnet\": {\n
      \               \"id\": \"[format('{0}/subnets/{1}', parameters('virtualNetworkId'),
      parameters('subnetName'))]\"\n              },\n              \"primary\": true,\n
      \             \"privateIPAddressVersion\": \"IPv4\"\n            }\n          }\n
      \       ]\n      }\n    },\n    {\n      \"type\": \"Microsoft.Compute/virtualMachines\",\n
      \     \"apiVersion\": \"2021-07-01\",\n      \"name\": \"[parameters('ubuntuVmName')]\",\n
      \     \"location\": \"[parameters('location')]\",\n      \"properties\": {\n
      \       \"hardwareProfile\": {\n          \"vmSize\": \"[variables('vmSizeSku')]\"\n
      \       },\n        \"storageProfile\": {\n          \"imageReference\": {\n
      \           \"id\": \"[extensionResourceId(format('/subscriptions/{0}/resourceGroups/{1}',
      variables('subscriptionId'), variables('imageResourceGroup')), 'Microsoft.Compute/images',
      parameters('imageName'))]\"\n          },\n          \"osDisk\": {\n            \"osType\":
      \"Linux\",\n            \"name\": \"[format('{0}_disk', parameters('ubuntuVmName'))]\",\n
      \           \"createOption\": \"FromImage\",\n            \"caching\": \"ReadWrite\",\n
      \           \"writeAcceleratorEnabled\": false,\n            \"managedDisk\":
      \"[json('{\\\"storageAccountType\\\": \\\"Premium_LRS\\\"}')]\",\n            \"deleteOption\":
      \"Delete\",\n            \"diskSizeGB\": 30\n          }\n        },\n        \"osProfile\":
      {\n          \"computerName\": \"[parameters('ubuntuVmName')]\",\n          \"adminUsername\":
      \"azureuser\",\n          \"linuxConfiguration\": {\n            \"disablePasswordAuthentication\":
      true,\n            \"ssh\": {\n              \"publicKeys\": [\n                {\n
      \                 \"path\": \"/home/azureuser/.ssh/authorized_keys\",\n                  \"keyData\":
      \"[parameters('sshPublicKeyAdmin')]\"\n                }\n              ]\n
      \           },\n            \"provisionVMAgent\": true,\n            \"patchSettings\":
      {\n              \"patchMode\": \"ImageDefault\",\n              \"assessmentMode\":
      \"ImageDefault\"\n            }\n          },\n          \"secrets\": [],\n
      \         \"allowExtensionOperations\": true\n        },\n        \"networkProfile\":
      {\n          \"networkInterfaces\": [\n            {\n              \"id\":
      \"[resourceId('Microsoft.Network/networkInterfaces', format('{0}_nic', parameters('ubuntuVmName')))]\"\n
      \           }\n          ]\n        }\n      },\n      \"dependsOn\": [\n        \"[resourceId('Microsoft.Network/networkInterfaces',
      format('{0}_nic', parameters('ubuntuVmName')))]\"\n      ]\n    }\n  ]\n}"
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '3591'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/e04986f0-753f-42c6-9305-931d271e7eab?_nouploadcache=false&_state=hKwMde8CcS4gk2i9a1Uoo44KIaOAWJ7OB62CTR4PWUh7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImUwNDk4NmYwLTc1M2YtNDJjNi05MzA1LTkzMWQyNzFlN2VhYiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0wOFQxNjo1NTozMS43Nzc1MTMyODVaIn0%3D&digest=sha256%3Ae71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:32 GMT
      docker-content-digest:
      - sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:33 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:33 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:34 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - c5376551-b8cb-4424-ad02-50a7583a3e86
      location:
      - /v2/automated-cli-tests-artifact/blobs/uploads/c5376551-b8cb-4424-ad02-50a7583a3e86?_nouploadcache=false&_state=IFkI69I_H1WskK-qqpx9xnhU5y9CL-zO_xOHDdm-ydV7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImM1Mzc2NTUxLWI4Y2ItNDQyNC1hZDAyLTUwYTc1ODNhM2U4NiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0wOFQxNjo1NTozNC4yMzk5OTc2MTZaIn0%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/blobs/uploads/c5376551-b8cb-4424-ad02-50a7583a3e86?_nouploadcache=false&_state=IFkI69I_H1WskK-qqpx9xnhU5y9CL-zO_xOHDdm-ydV7Ik5hbWUiOiJhdXRvbWF0ZWQtY2xpLXRlc3RzLWFydGlmYWN0IiwiVVVJRCI6ImM1Mzc2NTUxLWI4Y2ItNDQyNC1hZDAyLTUwYTc1ODNhM2U4NiIsIk9mZnNldCI6MCwiU3RhcnRlZEF0IjoiMjAyNC0wNS0wOFQxNjo1NTozNC4yMzk5OTc2MTZaIn0%3D&digest=sha256%3A44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:34 GMT
      docker-content-digest:
      - sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/blobs/sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "pull"}, {"Type":
        "repository", "Name": "automated-cli-tests-artifact", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:35 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:automated-cli-tests-artifact:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aautomated-cli-tests-artifact%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:36 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 3591,
      "digest": "sha256:e71bf56543dc33dc8e550a0c574efe9a4875754a4ddf74347e448dec2462798b",
      "annotations": {"org.opencontainers.image.title": "ubuntu_template.json"}}],
      "annotations": {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '504'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/automated-cli-tests-artifact/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:36 GMT
      docker-content-digest:
      - sha256:17d25d33c38f40fda4c9e45a0cec218b3f7f75e9c680ed8dd2a12ed0abdbc36b
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/automated-cli-tests-artifact/manifests/sha256:17d25d33c38f40fda4c9e45a0cec218b3f7f75e9c680ed8dd2a12ed0abdbc36b
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store/artifactManifests/ubuntu-vm-sa-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"storageAccountId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-blob-store-HostedResources-77AE0E49/providers/Microsoft.Storage/storageAccounts/77ae0e49ubuntublobstore9",
        "containerCredentials": [{"containerName": "automatedclitestsvhd-1-0-0", "containerSasUri":
        "https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx"}],
        "expiry": "2024-05-09T16:55:42.2490822+00:00", "credentialType": "AzureStorageAccountToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '533'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:41 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 1FB658EE128A4904AA45CEE4DE41D1FD Ref B: SJC211051204051 Ref C: 2024-05-08T16:55:37Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.10.12 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
      x-ms-blob-content-length:
      - '512'
      x-ms-blob-type:
      - PageBlob
      x-ms-date:
      - Wed, 08 May 2024 16:55:42 GMT
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:42 GMT
      etag:
      - '"0x8DC6F7FB2BFCD7E"'
      last-modified:
      - Wed, 08 May 2024 16:55:43 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: "61 38 6b 92 16 4b cc ac 6f d4 02 5c 6f 62 79 b9 \n8e 62 ae 07 02 1c dc
      73 5b 7a 51 e7 56 4e 4a b0 \n54 4a 93 2e 6b dd 3c b5 8b 60 fa 80 b1 80 1b 89
      \n1e 4d 7d 86 8e 25 76 58 24 8d 21 87 83 06 88 d6 \na4 fd 94 9c 66 b6 db ee
      92 46 f0 25 fc 84 bb f5 \n3f d9 49 28 ea 54 6a 2a 33 fa e0 47 eb 22 af 91 \nd4
      34 a6 d9 fe 58 cb 54 03 35 d6 45 40 96 4e f3 \n31 ea 78 20 45 e9 f2 3a de cb
      38 53 c0 9c b2 b7 \n12 9e 57 d9 f6 1b cb 20 23 8c 86 d3 40 da 84 c3 \n22 5b
      48 61 63 e2 5f 5f 43 6d 8f 41 fc ce c1 87 \n33 e1 e2 61 63 e2 5f 5"
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '512'
      Content-Type:
      - application/octet-stream
      If-Match:
      - '"0x8DC6F7FB2BFCD7E"'
      User-Agent:
      - azsdk-python-storage-blob/12.16.0 Python/3.10.12 (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
      x-ms-date:
      - Wed, 08 May 2024 16:55:42 GMT
      x-ms-page-write:
      - update
      x-ms-range:
      - bytes=0-511
      x-ms-version:
      - '2022-11-02'
    method: PUT
    uri: https://xxxxxxxxxxxxxxx.blob.core.windows.net/automatedclitestsvhd-1-0-0/automatedclitests-1-0-0.vhd?comp=page&sv=2021-08-06&si=StorageAccountAccessPolicy&sr=xxxxxxxxxxxxxxxxxxxx
  response:
    body:
      string: ''
    headers:
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:55:43 GMT
      etag:
      - '"0x8DC6F7FB33563E5"'
      last-modified:
      - Wed, 08 May 2024 16:55:43 GMT
      server:
      - Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
      x-ms-blob-sequence-number:
      - '0'
      x-ms-content-crc64:
      - iWvWqElPrJg=
      x-ms-request-server-encrypted:
      - 'true'
      x-ms-version:
      - '2022-11-02'
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "12072405825285278441"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3771'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187345",
        "name": "AOSM_CLI_deployment_1715187345", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12072405825285278441", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId": "036a48df-4255-47ce-9959-3f5f26b21054",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1413'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 56EB9263728442DAAD2B9D3DF5702D97 Ref B: SJC211051205025 Ref C: 2024-05-08T16:55:46Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "12072405825285278441"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "saArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an existing Storage Account-backed Artifact Store, deployed under the
      publisher."}}, "nfDefinitionGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Function Definition Group"}}, "nfDefinitionVersion":
      {"type": "string", "metadata": {"description": "The version of the NFDV you
      want to deploy, in format A.B.C"}}}, "variables": {"$fxv#0": {"$schema": "https://json-schema.org/draft-07/schema#",
      "title": "DeployParametersSchema", "type": "object", "properties": {"automated-cli-tests-artifact":
      {"type": "object", "properties": {"subnetName": {"type": "string"}, "virtualNetworkId":
      {"type": "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}}, "$fxv#1": {"imageHyperVGeneration":
      "V1", "imageName": "ubuntu-vmImage"}, "$fxv#2": {"imageName": "ubuntu-vmImage",
      "subnetName": "{deployParameters.automated-cli-tests-artifact.subnetName}",
      "virtualNetworkId": "{deployParameters.automated-cli-tests-artifact.virtualNetworkId}",
      "sshPublicKeyAdmin": "{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}"}},
      "resources": [{"type": "Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nfDefinitionGroup''), parameters(''nfDefinitionVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"deployParameters": "[string(variables(''$fxv#0''))]",
      "networkFunctionType": "VirtualNetworkFunction", "networkFunctionTemplate":
      {"nfviType": "AzureCore", "networkFunctionApplications": [{"artifactType": "VhdImageFile",
      "name": "automated-cli-tests-vhd", "dependsOnProfile": null, "artifactProfile":
      {"vhdArtifactProfile": {"vhdName": "automated-cli-tests-vhd", "vhdVersion":
      "1-0-0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''saArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"vhdImageMappingRuleProfile": {"userConfiguration": "[string(variables(''$fxv#1''))]"},
      "applicationEnablement": "Enabled"}}, {"artifactType": "ArmTemplate", "name":
      "automated-cli-tests-artifact", "dependsOnProfile": null, "artifactProfile":
      {"templateArtifactProfile": {"templateName": "automated-cli-tests-artifact",
      "templateVersion": "1.0.0"}, "artifactStore": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}}, "deployParametersMappingRuleProfile":
      {"templateMappingRuleProfile": {"templateParameters": "[string(variables(''$fxv#2''))]"},
      "applicationEnablement": "Enabled"}}]}}}]}, "parameters": {"location": {"value":
      "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nfDefinitionGroup": {"value":
      "ubuntu-vm"}, "nfDefinitionVersion": {"value": "1.0.0"}, "saArtifactStoreName":
      {"value": "ubuntu-blob-store"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      Content-Length:
      - '3771'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187345",
        "name": "AOSM_CLI_deployment_1715187345", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12072405825285278441", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Accepted", "timestamp":
        "2024-05-08T16:55:54.2701716Z", "duration": "PT0.000714S", "correlationId":
        "062611ba-d76e-4a89-b471-d0d5948448d4", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187345/operationStatuses/08584864195335450594?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '1137'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 66F744DE5D6D4805876FDD5A15F9A614 Ref B: CO1EDGE1910 Ref C: 2024-05-08T16:55:49Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864195335450594?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:55:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 1BA54DFA69CD4D468C45D0E7E2755C2F Ref B: CO1EDGE2521 Ref C: 2024-05-08T16:55:55Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864195335450594?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:56:26 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: A3E7484FC7E14D6697AA1C81FDB22AE4 Ref B: SJC211051204029 Ref C: 2024-05-08T16:56:26Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864195335450594?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:56:57 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 36F42CA5600E447CB32CC5BC4F455FC8 Ref B: SJC211051205039 Ref C: 2024-05-08T16:56:56Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864195335450594?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:28 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 6FB99C1FD1724E43AD731CC8DAFA7411 Ref B: CO1EDGE2611 Ref C: 2024-05-08T16:57:28Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nfd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder --definition-type
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187345",
        "name": "AOSM_CLI_deployment_1715187345", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12072405825285278441", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "saArtifactStoreName": {"type":
        "String", "value": "ubuntu-blob-store"}, "nfDefinitionGroup": {"type": "String",
        "value": "ubuntu-vm"}, "nfDefinitionVersion": {"type": "String", "value":
        "1.0.0"}}, "mode": "Incremental", "provisioningState": "Succeeded", "timestamp":
        "2024-05-08T16:57:22.1123372Z", "duration": "PT1M27.8428796S", "correlationId":
        "062611ba-d76e-4a89-b471-d0d5948448d4", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1429'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:30 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 6BA8AE88A7D147C09CB612FC9D234FF9 Ref B: CO1EDGE2909 Ref C: 2024-05-08T16:57:29Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd build
      Connection:
      - keep-alive
      ParameterSetName:
      - -f
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkFunctionDefinitionGroups/ubuntu-vm/networkFunctionDefinitionVersions/1.0.0",
        "name": "1.0.0", "type": "microsoft.hybridnetwork/publishers/networkfunctiondefinitiongroups/networkfunctiondefinitionversions",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-05-08T16:55:57.5722728Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "User", "lastModifiedAt":
        "2024-05-08T16:55:57.5722728Z"}, "properties": {"networkFunctionTemplate":
        {"networkFunctionApplications": [{"artifactProfile": {"vhdArtifactProfile":
        {"vhdName": "automated-cli-tests-vhd", "vhdVersion": "1-0-0"}, "artifactStore":
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-blob-store"}},
        "deployParametersMappingRuleProfile": {"vhdImageMappingRuleProfile": {"userConfiguration":
        "{\"imageHyperVGeneration\":\"V1\",\"imageName\":\"ubuntu-vmImage\"}"}, "applicationEnablement":
        "Enabled"}, "artifactType": "VhdImageFile", "dependsOnProfile": null, "name":
        "automated-cli-tests-vhd"}, {"artifactProfile": {"templateArtifactProfile":
        {"templateName": "automated-cli-tests-artifact", "templateVersion": "1.0.0"},
        "artifactStore": {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"}},
        "deployParametersMappingRuleProfile": {"templateMappingRuleProfile": {"templateParameters":
        "{\"imageName\":\"ubuntu-vmImage\",\"subnetName\":\"{deployParameters.automated-cli-tests-artifact.subnetName}\",\"virtualNetworkId\":\"{deployParameters.automated-cli-tests-artifact.virtualNetworkId}\",\"sshPublicKeyAdmin\":\"{deployParameters.automated-cli-tests-artifact.sshPublicKeyAdmin}\"}"},
        "applicationEnablement": "Enabled"}, "artifactType": "ArmTemplate", "dependsOnProfile":
        null, "name": "automated-cli-tests-artifact"}], "nfviType": "AzureCore"},
        "versionState": "Preview", "description": null, "deployParameters": "{\"$schema\":\"https://json-schema.org/draft-07/schema#\",\"title\":\"DeployParametersSchema\",\"type\":\"object\",\"properties\":{\"automated-cli-tests-artifact\":{\"type\":\"object\",\"properties\":{\"subnetName\":{\"type\":\"string\"},\"virtualNetworkId\":{\"type\":\"string\"},\"sshPublicKeyAdmin\":{\"type\":\"string\"}},\"required\":[\"subnetName\",\"virtualNetworkId\",\"sshPublicKeyAdmin\"]}},\"required\":[\"automated-cli-tests-artifact\"]}",
        "networkFunctionType": "VirtualNetworkFunction", "provisioningState": "Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2893'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:30 GMT
      etag:
      - '"87001110-0000-1100-0000-663baeb50000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
      x-msedge-ref:
      - 'Ref A: 23A52D449A574FE2BD723881EF242503 Ref B: CO1EDGE1211 Ref C: 2024-05-08T16:57:30Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: HEAD
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001?api-version=2022-09-01
  response:
    body:
      string: ''
    headers:
      cache-control:
      - no-cache
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 16:57:31 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: FFB10CCC445B4EC9A0CB7A32343CF20B Ref B: CO1EDGE2717 Ref C: 2024-05-08T16:57:31Z'
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "name": "automated-cli-tests-ubuntu-publisher", "type": "microsoft.hybridnetwork/publishers",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-05-08T16:49:26.3763189Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "User", "lastModifiedAt":
        "2024-05-08T16:49:26.3763189Z"}, "properties": {"scope": "Private", "provisioningState":
        "Succeeded"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '624'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:31 GMT
      etag:
      - '"4f007281-0000-1100-0000-663bad320000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
      x-msedge-ref:
      - 'Ref A: A34E4F94F7874DA6AA1C7F715E23F70F Ref B: CO1EDGE1408 Ref C: 2024-05-08T16:57:31Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr?api-version=2023-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "name": "ubuntu-acr", "type": "microsoft.hybridnetwork/publishers/artifactstores",
        "location": "uksouth", "systemData": {"createdBy": "xxxxxxxxxxx@microsoft.com",
        "createdByType": "User", "createdAt": "2024-05-08T16:50:53.2905209Z", "lastModifiedBy":
        "xxxxxxxxxxx@microsoft.com", "lastModifiedByType": "Application", "lastModifiedAt":
        "2024-05-08T16:56:21.1693271Z"}, "properties": {"storeType": "AzureContainerRegistry",
        "replicationStrategy": "SingleReplication", "managedResourceGroupConfiguration":
        {"name": "ubuntu-acr-HostedResources-14E866B5", "location": "uksouth"}, "provisioningState":
        "Succeeded", "storageResourceId": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/ubuntu-acr-HostedResources-14E866B5/providers/Microsoft.ContainerRegistry/registries/AutomatedCliTestsUbuntuPublisherUbuntuAc5ba2def680"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1045'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:33 GMT
      etag:
      - '"1300397c-0000-1000-0000-663baeb50000"'
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-providerhub-traffic:
      - 'True'
      x-msedge-ref:
      - 'Ref A: B80DB8F7B23747FC94B4524B102158DE Ref B: CO1EDGE2510 Ref C: 2024-05-08T16:57:32Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '304'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:33 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 005BB51F095046DB8E58A4E2E5743E6D Ref B: CO1EDGE1614 Ref C: 2024-05-08T16:57:33Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14743947880900953734"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1872'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187457",
        "name": "AOSM_CLI_deployment_1715187457", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14743947880900953734", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "5c710914-ad80-48ab-9396-d319a493b82c", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkServiceDesignGroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3034'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: A4352B803B1C46F5A84CADE69EE97FEE Ref B: CO1EDGE1714 Ref C: 2024-05-08T16:57:38Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "14743947880900953734"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of a publisher, expected to be in the resource group where you deploy
      the template"}}, "acrArtifactStoreName": {"type": "string", "metadata": {"description":
      "Name of an ACR-backed Artifact Store, deployed under the publisher."}}, "nsDesignGroup":
      {"type": "string", "metadata": {"description": "Name of an Network Service Design
      Group"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers", "apiVersion":
      "2023-09-01", "name": "[parameters(''publisherName'')]", "location": "[parameters(''location'')]",
      "properties": {"scope": "Private"}}, {"type": "Microsoft.HybridNetwork/publishers/artifactStores",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''))]", "location": "[parameters(''location'')]",
      "properties": {"storeType": "AzureContainerRegistry"}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'',
      parameters(''publisherName''))]"]}, {"type": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''))]", "location": "[parameters(''location'')]",
      "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers'', parameters(''publisherName''))]"]}]},
      "parameters": {"location": {"value": "uksouth"}, "publisherName": {"value":
      "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName": {"value": "ubuntu-acr"},
      "nsDesignGroup": {"value": "ubuntu"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1872'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187457",
        "name": "AOSM_CLI_deployment_1715187457", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14743947880900953734", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Accepted",
        "timestamp": "2024-05-08T16:57:46.0988616Z", "duration": "PT0.000964S", "correlationId":
        "b458fc14-65d9-46fc-a20d-ce5546f62dcb", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers", "locations": ["uksouth"]},
        {"resourceType": "publishers/artifactStores", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkServiceDesignGroups", "locations": ["uksouth"]}]}], "dependencies":
        [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187457/operationStatuses/08584864194217749428?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2412'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:46 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 16AD8AC0D89349AB9491BCCF8755ACAB Ref B: CO1EDGE1613 Ref C: 2024-05-08T16:57:41Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Accepted"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '22'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:57:47 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: E666BD2D6FCD4AA8866D469AE15C9D2A Ref B: CO1EDGE2621 Ref C: 2024-05-08T16:57:47Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:58:18 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C025A289707440838BCF646EBCA47931 Ref B: CO1EDGE2011 Ref C: 2024-05-08T16:58:18Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:58:49 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 7233D706BCE8498F80B4DAFE28A307E2 Ref B: CO1EDGE2509 Ref C: 2024-05-08T16:58:49Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:59:20 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 017333B0DF97442089B2D1776F34E7C5 Ref B: CO1EDGE1408 Ref C: 2024-05-08T16:59:20Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 16:59:50 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: D586E90B4F32483E98047B6B37DC90CC Ref B: CO1EDGE2910 Ref C: 2024-05-08T16:59:51Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:00:22 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 46CEB83CFDBE4369B2F50A0E4C235A3C Ref B: CO1EDGE1314 Ref C: 2024-05-08T17:00:21Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:00:52 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C05C56DDEA7D4DFEAE933366C0D1F33F Ref B: CO1EDGE1811 Ref C: 2024-05-08T17:00:52Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:01:23 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 963A3B5DFDF44DEC8EDD5C38FB9E41BB Ref B: CO1EDGE2510 Ref C: 2024-05-08T17:01:23Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864194217749428?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:01:54 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 78C21F0A1D5B40F7B4518AE06D294947 Ref B: SJC211051205023 Ref C: 2024-05-08T17:01:54Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187457",
        "name": "AOSM_CLI_deployment_1715187457", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "14743947880900953734", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}}, "mode": "Incremental", "provisioningState": "Succeeded",
        "timestamp": "2024-05-08T17:01:42.6741239Z", "duration": "PT3M56.5762263S",
        "correlationId": "b458fc14-65d9-46fc-a20d-ce5546f62dcb", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers",
        "locations": ["uksouth"]}, {"resourceType": "publishers/artifactStores", "locations":
        ["uksouth"]}, {"resourceType": "publishers/networkServiceDesignGroups", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr",
        "resourceType": "Microsoft.HybridNetwork/publishers/artifactStores", "resourceName":
        "automated-cli-tests-ubuntu-publisher/ubuntu-acr"}, {"dependsOn": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher",
        "resourceType": "Microsoft.HybridNetwork/publishers", "resourceName": "automated-cli-tests-ubuntu-publisher"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '3050'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:01:55 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: C0C7D85C74CF41E1AF90EA48CE503B1B Ref B: SJC211051205033 Ref C: 2024-05-08T17:01:55Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0?api-version=2023-09-01
  response:
    body:
      string: '{"error": {"code": "ResourceNotFound", "message": "The Resource ''Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0''
        under resource group ''cli_test_vnf_nsd_000001'' was not found. For more details
        please go to https://aka.ms/ARMResourceNotFoundFix"}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '340'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:01:56 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-failure-cause:
      - gateway
      x-msedge-ref:
      - 'Ref A: 621B7F6E7274490CA613F6967FC44259 Ref B: SJC211051205039 Ref C: 2024-05-08T17:01:56Z'
    status:
      code: 404
      message: Not Found
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "4244437476724292391"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1408'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187719",
        "name": "AOSM_CLI_deployment_1715187719", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4244437476724292391", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration": "PT0S", "correlationId":
        "53889044-4bec-44fd-af43-46dea804455a", "providers": [{"namespace": "Microsoft.HybridNetwork",
        "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "validatedResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1247'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:02:02 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 41BCF5F78F9442B6B626FD1BA6E8E75F Ref B: SJC211051205025 Ref C: 2024-05-08T17:01:59Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "4244437476724292391"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "acrManifestName": {"type": "string", "metadata": {"description":
      "Name of the Artifact Manifest to create"}}}, "resources": [{"type": "Microsoft.HybridNetwork/publishers/artifactStores/artifactManifests",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''acrArtifactStoreName''), parameters(''acrManifestName''))]", "location":
      "[parameters(''location'')]", "properties": {"artifacts": [{"artifactName":
      "ubuntu", "artifactType": "OCIArtifact", "artifactVersion": "1.0.0"}]}}]}, "parameters":
      {"location": {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "acrManifestName": {"value":
      "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '1408'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187719",
        "name": "AOSM_CLI_deployment_1715187719", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4244437476724292391", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Accepted", "timestamp": "2024-05-08T17:02:08.2476043Z", "duration": "PT0.000396S",
        "correlationId": "38e9d8a0-5c4f-42d6-b16f-798709523da3", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": []}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187719/operationStatuses/08584864191595704634?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '983'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:02:08 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 63C2512EE98D4DCC8DFF884A6FB6B72B Ref B: SJC211051204029 Ref C: 2024-05-08T17:02:03Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864191595704634?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:02:09 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 7B05974715534E75B717DB49F0114691 Ref B: SJC211051204035 Ref C: 2024-05-08T17:02:09Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864191595704634?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:02:40 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 9BF09C1982C0492E8235ABC4B14E3B32 Ref B: SJC211051204045 Ref C: 2024-05-08T17:02:40Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864191595704634?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 793FAD1D66204E91AA951CF718550FB9 Ref B: SJC211051205037 Ref C: 2024-05-08T17:03:11Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864191595704634?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: A91E2BAE58524672B93DD59188B0E966 Ref B: CO1EDGE1221 Ref C: 2024-05-08T17:03:42Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187719",
        "name": "AOSM_CLI_deployment_1715187719", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "4244437476724292391", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "acrManifestName": {"type": "String",
        "value": "ubuntu-nsd-manifest-1-0-0"}}, "mode": "Incremental", "provisioningState":
        "Succeeded", "timestamp": "2024-05-08T17:03:35.2129396Z", "duration": "PT1M26.9657313S",
        "correlationId": "38e9d8a0-5c4f-42d6-b16f-798709523da3", "providers": [{"namespace":
        "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType": "publishers/artifactStores/artifactManifests",
        "locations": ["uksouth"]}]}], "dependencies": [], "outputResources": [{"id":
        "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '1263'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 4977FD32531A4B518F8B19B16239EC0F Ref B: CO1EDGE2909 Ref C: 2024-05-08T17:03:42Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/artifactStores/ubuntu-acr/artifactManifests/ubuntu-nsd-manifest-1-0-0/listCredential?api-version=2023-09-01
  response:
    body:
      string: '{"username": "ubuntu-nsd-manifest-1-0-0", "acrToken": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "acrServerUrl": "https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",
        "repositories": ["ubuntu"], "expiry": "2024-05-09T17:03:51.6576016+00:00",
        "credentialType": "AzureContainerRegistryScopedToken"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '328'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:51 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-build-version:
      - 1.0.02682.2890
      x-ms-providerhub-traffic:
      - 'True'
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: D1FEEA9FE2D143F5B664001FDDAF80D6 Ref B: CO1EDGE1511 Ref C: 2024-05-08T17:03:46Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:52 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:53 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 17:03:54 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - 0e759050-5ae1-4405-9769-ee0c8f1a442e
      location:
      - /v2/ubuntu/blobs/uploads/0e759050-5ae1-4405-9769-ee0c8f1a442e?_nouploadcache=false&_state=Hp9RYsdF1EVJKjo0J9R03_jvHbUj3Ombo5F5GNxChW97Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiMGU3NTkwNTAtNWFlMS00NDA1LTk3NjktZWUwYzhmMWE0NDJlIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTA4VDE3OjAzOjU0LjA0NTUwODMyMloifQ%3D%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "13997939921627854066"}}, "parameters": {"configObject":
      {"type": "secureObject"}}, "variables": {"resourceGroupId": "[resourceGroup().id]",
      "identityObject": "[if(equals(parameters(''configObject'').managedIdentityId,
      ''''), createObject(''type'', ''SystemAssigned''), createObject(''type'', ''UserAssigned'',
      ''userAssignedIdentities'', createObject(format(''{0}'', parameters(''configObject'').managedIdentityId),
      createObject())))]", "nfdvSymbolicName": "[format(''{0}/{1}/{2}'', parameters(''configObject'').publisherName,
      parameters(''configObject'').nfdgName, parameters(''configObject'').nfdv)]"},
      "resources": [{"copy": {"name": "nfResource", "count": "[length(parameters(''configObject'').deployParameters)]"},
      "type": "Microsoft.HybridNetwork/networkFunctions", "apiVersion": "2023-09-01",
      "name": "[format(''{0}{1}'', parameters(''configObject'').nfdgName, copyIndex())]",
      "location": "[parameters(''configObject'').location]", "identity": "[variables(''identityObject'')]",
      "properties": {"networkFunctionDefinitionVersionResourceReference": {"id": "[extensionResourceId(format(''/subscriptions/{0}/resourceGroups/{1}'',
      subscription().subscriptionId, parameters(''configObject'').publisherResourceGroup),
      ''Microsoft.HybridNetwork/publishers/networkFunctionDefinitionGroups/networkFunctionDefinitionVersions'',
      split(variables(''nfdvSymbolicName''), ''/'')[0], split(variables(''nfdvSymbolicName''),
      ''/'')[1], split(variables(''nfdvSymbolicName''), ''/'')[2])]", "idType": "Open"},
      "nfviType": "AzureCore", "nfviId": "[if(equals(parameters(''configObject'').customLocationId,
      ''''), variables(''resourceGroupId''), parameters(''configObject'').customLocationId)]",
      "allowSoftwareUpdate": true, "configurationType": "Open", "deploymentValues":
      "[string(parameters(''configObject'').deployParameters[copyIndex()])]"}}]}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '1981'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/0e759050-5ae1-4405-9769-ee0c8f1a442e?_nouploadcache=false&_state=Hp9RYsdF1EVJKjo0J9R03_jvHbUj3Ombo5F5GNxChW97Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiMGU3NTkwNTAtNWFlMS00NDA1LTk3NjktZWUwYzhmMWE0NDJlIiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTA4VDE3OjAzOjU0LjA0NTUwODMyMloifQ%3D%3D&digest=sha256%3A3ccb87556f82c72b4c80c83273d1ac390d77d09ef3504cce53e2c7dd78338bfe
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 17:03:54 GMT
      docker-content-digest:
      - sha256:3ccb87556f82c72b4c80c83273d1ac390d77d09ef3504cce53e2c7dd78338bfe
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:3ccb87556f82c72b4c80c83273d1ac390d77d09ef3504cce53e2c7dd78338bfe
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:55 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:55 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.3'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: POST
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 17:03:56 GMT
      docker-distribution-api-version:
      - registry/2.0
      docker-upload-uuid:
      - b3063d29-7dbd-49d6-9e27-100ac664de17
      location:
      - /v2/ubuntu/blobs/uploads/b3063d29-7dbd-49d6-9e27-100ac664de17?_nouploadcache=false&_state=pgcNqTqi57sZ8NTYkq8KLkdTc1Yv5aveLPbwK14PtVx7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiYjMwNjNkMjktN2RiZC00OWQ2LTllMjctMTAwYWM2NjRkZTE3IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTA4VDE3OjAzOjU2LjQ1Nzc0MjE0MVoifQ%3D%3D
      range:
      - 0-0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 202
      message: Accepted
- request:
    body: '{}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '2'
      Content-Type:
      - application/octet-stream
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/blobs/uploads/b3063d29-7dbd-49d6-9e27-100ac664de17?_nouploadcache=false&_state=pgcNqTqi57sZ8NTYkq8KLkdTc1Yv5aveLPbwK14PtVx7Ik5hbWUiOiJ1YnVudHUiLCJVVUlEIjoiYjMwNjNkMjktN2RiZC00OWQ2LTllMjctMTAwYWM2NjRkZTE3IiwiT2Zmc2V0IjowLCJTdGFydGVkQXQiOiIyMDI0LTA1LTA4VDE3OjAzOjU2LjQ1Nzc0MjE0MVoifQ%3D%3D&digest=sha256%3A44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 17:03:57 GMT
      docker-content-digest:
      - sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/blobs/sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1981,
      "digest": "sha256:3ccb87556f82c72b4c80c83273d1ac390d77d09ef3504cce53e2c7dd78338bfe",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: '{"errors": [{"code": "UNAUTHORIZED", "message": "authentication required,
        visit https://aka.ms/acr/authorization for more information.", "detail": [{"Type":
        "repository", "Name": "ubuntu", "Action": "pull"}, {"Type": "repository",
        "Name": "ubuntu", "Action": "push"}]}]}'
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '270'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:57 GMT
      docker-distribution-api-version:
      - registry/2.0
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      www-authenticate:
      - Bearer realm="https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token",service="automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io",scope="repository:ubuntu:pull,push"
      x-content-type-options:
      - nosniff
    status:
      code: 401
      message: Unauthorized
- request:
    body: null
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Service:
      - automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io
      User-Agent:
      - oras-py
    method: GET
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/oauth2/token?service=automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io&scope=repository%3Aubuntu%3Apull%2Cpush
  response:
    body:
      string: '{"access_token": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:03:58 GMT
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      transfer-encoding:
      - chunked
      x-ms-ratelimit-remaining-calls-per-second:
      - '333.316667'
    status:
      code: 200
      message: OK
- request:
    body: '{"schemaVersion": 2, "mediaType": "application/vnd.oci.image.manifest.v1+json",
      "config": {"mediaType": "application/vnd.unknown.config.v1+json", "size": 2,
      "digest": "sha256:44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a"},
      "layers": [{"mediaType": "application/vnd.oci.image.layer.v1.tar", "size": 1981,
      "digest": "sha256:3ccb87556f82c72b4c80c83273d1ac390d77d09ef3504cce53e2c7dd78338bfe",
      "annotations": {"org.opencontainers.image.title": "ubuntu-vm.json"}}], "annotations":
      {}}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Length:
      - '498'
      Content-Type:
      - application/vnd.oci.image.manifest.v1+json
      User-Agent:
      - python-requests/2.31.0
    method: PUT
    uri: https://automatedclitestsubuntupublisherubuntuac5ba2def680.azurecr.io/v2/ubuntu/manifests/1.0.0
  response:
    body:
      string: ''
    headers:
      access-control-expose-headers:
      - Docker-Content-Digest
      - WWW-Authenticate
      - Link
      - X-Ms-Correlation-Request-Id
      connection:
      - keep-alive
      content-length:
      - '0'
      date:
      - Wed, 08 May 2024 17:03:59 GMT
      docker-content-digest:
      - sha256:7516e68c6e8b63fcbb428b1ac84e62da7af611846b0a395a546642d45bfe3141
      docker-distribution-api-version:
      - registry/2.0
      location:
      - /v2/ubuntu/manifests/sha256:7516e68c6e8b63fcbb428b1ac84e62da7af611846b0a395a546642d45bfe3141
      server:
      - AzureContainerRegistry
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      - max-age=31536000; includeSubDomains
      x-content-type-options:
      - nosniff
    status:
      code: 201
      message: Created
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "12728999846330232460"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdv": {"type": "string"}, "deployParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdv", "deployParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdv": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdv}",
      "deployParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deployParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.HybridNetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups/networkServiceDesignVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[format(''{0}1'', parameters(''nfviSiteName''))]", "type":
      "AzureCore"}}, "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4148'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: POST
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/validate?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187841",
        "name": "AOSM_CLI_deployment_1715187841", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12728999846330232460", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "0001-01-01T00:00:00Z", "duration":
        "PT0S", "correlationId": "1213fde8-7484-4074-af2e-b8c71d46ec17", "providers":
        [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkServiceDesignGroups/networkServiceDesignVersions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.HybridNetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups/networkServiceDesignVersions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "validatedResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2505'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:04:05 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: DEA1C6AA84844D4780BF96F7E7861723 Ref B: CO1EDGE1614 Ref C: 2024-05-08T17:04:01Z'
    status:
      code: 200
      message: OK
- request:
    body: '{"properties": {"template": {"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0", "metadata": {"_generator": {"name": "bicep", "version":
      "0.26.54.24096", "templateHash": "12728999846330232460"}}, "parameters": {"location":
      {"type": "string"}, "publisherName": {"type": "string", "metadata": {"description":
      "Name of an existing publisher, expected to be in the resource group where you
      deploy the template"}}, "acrArtifactStoreName": {"type": "string", "metadata":
      {"description": "Name of an existing ACR-backed Artifact Store, deployed under
      the publisher."}}, "nsDesignGroup": {"type": "string", "metadata": {"description":
      "Name of an existing Network Service Design Group"}}, "nsDesignVersion": {"type":
      "string", "metadata": {"description": "The version of the NSDV you want to create,
      in format A.B.C"}}, "nfviSiteName": {"type": "string", "defaultValue": "ubuntu_NFVI",
      "metadata": {"description": "Name of the nfvi site"}}}, "variables": {"$fxv#0":
      {"$schema": "https://json-schema.org/draft-07/schema#", "title": "ConfigGroupSchema",
      "type": "object", "properties": {"ubuntu": {"type": "object", "properties":
      {"nfdv": {"type": "string"}, "deployParameters": {"type": "array", "items":
      {"type": "object", "properties": {"automated-cli-tests-artifact": {"type": "object",
      "properties": {"subnetName": {"type": "string"}, "virtualNetworkId": {"type":
      "string"}, "sshPublicKeyAdmin": {"type": "string"}}, "required": ["subnetName",
      "virtualNetworkId", "sshPublicKeyAdmin"]}}, "required": ["automated-cli-tests-artifact"]}},
      "managedIdentityId": {"type": "string"}}, "required": ["nfdv", "deployParameters",
      "managedIdentityId"]}}, "required": ["ubuntu"]}, "$fxv#1": {"configObject":
      {"location": "uksouth", "publisherName": "automated-cli-tests-ubuntu-publisher",
      "nfdgName": "ubuntu-vm", "publisherResourceGroup": "cli_test_vnf_nsd_000001",
      "customLocationId": "", "nfdv": "{configurationparameters(''ConfigGroupSchema'').ubuntu.nfdv}",
      "deployParameters": "{configurationparameters(''ConfigGroupSchema'').ubuntu.deployParameters}",
      "managedIdentityId": "{configurationparameters(''ConfigGroupSchema'').ubuntu.managedIdentityId}"}}},
      "resources": [{"type": "Microsoft.HybridNetwork/publishers/configurationGroupSchemas",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}'', parameters(''publisherName''),
      ''ConfigGroupSchema'')]", "location": "[parameters(''location'')]", "properties":
      {"schemaDefinition": "[string(variables(''$fxv#0''))]"}}, {"type": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups/networkServiceDesignVersions",
      "apiVersion": "2023-09-01", "name": "[format(''{0}/{1}/{2}'', parameters(''publisherName''),
      parameters(''nsDesignGroup''), parameters(''nsDesignVersion''))]", "location":
      "[parameters(''location'')]", "properties": {"description": "Plain ubuntu VM",
      "configurationGroupSchemaReferences": {"ConfigGroupSchema": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"}}, "nfvisFromSite":
      {"nfvi1": {"name": "[format(''{0}1'', parameters(''nfviSiteName''))]", "type":
      "AzureCore"}}, "resourceElementTemplates": [{"name": "ubuntu", "type": "NetworkFunctionDefinition",
      "configuration": {"artifactProfile": {"artifactStoreReference": {"id": "[resourceId(''Microsoft.HybridNetwork/publishers/artifactStores'',
      parameters(''publisherName''), parameters(''acrArtifactStoreName''))]"}, "artifactName":
      "ubuntu", "artifactVersion": "1.0.0"}, "templateType": "ArmTemplate", "parameterValues":
      "[string(variables(''$fxv#1''))]"}, "dependsOnProfile": {"installDependsOn":
      [], "uninstallDependsOn": [], "updateDependsOn": []}}]}, "dependsOn": ["[resourceId(''Microsoft.HybridNetwork/publishers/configurationGroupSchemas'',
      parameters(''publisherName''), ''ConfigGroupSchema'')]"]}]}, "parameters": {"location":
      {"value": "uksouth"}, "publisherName": {"value": "automated-cli-tests-ubuntu-publisher"},
      "acrArtifactStoreName": {"value": "ubuntu-acr"}, "nsDesignGroup": {"value":
      "ubuntu"}, "nsDesignVersion": {"value": "1.0.0"}, "nfviSiteName": {"value":
      "ubuntu_NFVI"}}, "mode": "Incremental"}}'
    headers:
      Accept:
      - application/json
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      Content-Length:
      - '4148'
      Content-Type:
      - application/json
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: PUT
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187841",
        "name": "AOSM_CLI_deployment_1715187841", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12728999846330232460", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Accepted", "timestamp": "2024-05-08T17:04:10.0863361Z",
        "duration": "PT0.0003004S", "correlationId": "7ee3e3b2-04e6-4de8-b0a1-f65e1f30103b",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkServiceDesignGroups/networkServiceDesignVersions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.HybridNetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups/networkServiceDesignVersions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}]}}'
    headers:
      azure-asyncoperation:
      - https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187841/operationStatuses/08584864190373927073?api-version=2022-09-01
      cache-control:
      - no-cache
      content-length:
      - '2015'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:04:10 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-ms-ratelimit-remaining-subscription-writes:
      - '1199'
      x-msedge-ref:
      - 'Ref A: 07BA0930C530490EBE0229FA24B96AFD Ref B: CO1EDGE1613 Ref C: 2024-05-08T17:04:05Z'
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864190373927073?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:04:11 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 0606BD55DA2C4480B4C281E2716AB95A Ref B: CO1EDGE2318 Ref C: 2024-05-08T17:04:11Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864190373927073?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:04:42 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 104EAF3967DA4AF5ADD0E3FF325C88A4 Ref B: CO1EDGE1811 Ref C: 2024-05-08T17:04:42Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864190373927073?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Running"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '21'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:05:13 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: EBE5DEE161C547A391C876BA15AD5CD7 Ref B: CO1EDGE2509 Ref C: 2024-05-08T17:05:13Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment/operationStatuses/08584864190373927073?api-version=2022-09-01
  response:
    body:
      string: '{"status": "Succeeded"}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '23'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:05:44 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 60392BEBE46A46678EE6B23C6252108D Ref B: CO1EDGE1714 Ref C: 2024-05-08T17:05:44Z'
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      CommandName:
      - aosm nsd publish
      Connection:
      - keep-alive
      ParameterSetName:
      - --build-output-folder
      User-Agent:
      - AZURECLI/2.60.0.post20240428062252 azsdk-python-core/1.30.1 Python/3.10.12
        (Linux-5.15.146.1-microsoft-standard-WSL2-x86_64-with-glibc2.35)
    method: GET
    uri: https://management.azure.com/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/mock-deployment?api-version=2022-09-01
  response:
    body:
      string: '{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.Resources/deployments/AOSM_CLI_deployment_1715187841",
        "name": "AOSM_CLI_deployment_1715187841", "type": "Microsoft.Resources/deployments",
        "properties": {"templateHash": "12728999846330232460", "parameters": {"location":
        {"type": "String", "value": "uksouth"}, "publisherName": {"type": "String",
        "value": "automated-cli-tests-ubuntu-publisher"}, "acrArtifactStoreName":
        {"type": "String", "value": "ubuntu-acr"}, "nsDesignGroup": {"type": "String",
        "value": "ubuntu"}, "nsDesignVersion": {"type": "String", "value": "1.0.0"},
        "nfviSiteName": {"type": "String", "value": "ubuntu_NFVI"}}, "mode": "Incremental",
        "provisioningState": "Succeeded", "timestamp": "2024-05-08T17:05:15.6745823Z",
        "duration": "PT1M5.5885466S", "correlationId": "7ee3e3b2-04e6-4de8-b0a1-f65e1f30103b",
        "providers": [{"namespace": "Microsoft.HybridNetwork", "resourceTypes": [{"resourceType":
        "publishers/configurationGroupSchemas", "locations": ["uksouth"]}, {"resourceType":
        "publishers/networkServiceDesignGroups/networkServiceDesignVersions", "locations":
        ["uksouth"]}]}], "dependencies": [{"dependsOn": [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema",
        "resourceType": "Microsoft.HybridNetwork/publishers/configurationGroupSchemas",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ConfigGroupSchema"}],
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0",
        "resourceType": "Microsoft.HybridNetwork/publishers/networkServiceDesignGroups/networkServiceDesignVersions",
        "resourceName": "automated-cli-tests-ubuntu-publisher/ubuntu/1.0.0"}], "outputResources":
        [{"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/configurationGroupSchemas/ConfigGroupSchema"},
        {"id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/cli_test_vnf_nsd_000001/providers/Microsoft.HybridNetwork/publishers/automated-cli-tests-ubuntu-publisher/networkServiceDesignGroups/ubuntu/networkServiceDesignVersions/1.0.0"}]}}'
    headers:
      cache-control:
      - no-cache
      content-length:
      - '2520'
      content-type:
      - application/json; charset=utf-8
      date:
      - Wed, 08 May 2024 17:05:45 GMT
      expires:
      - '-1'
      pragma:
      - no-cache
      strict-transport-security:
      - max-age=31536000; includeSubDomains
      x-cache:
      - CONFIG_NOCACHE
      x-content-type-options:
      - nosniff
      x-msedge-ref:
      - 'Ref A: 53FF01B6F5E94DA7885DC8C67D3855D4 Ref B: CO1EDGE1516 Ref C: 2024-05-08T17:05:45Z'
    status:
      code: 200
      message: OK
version: 1
